
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character"  />
<div>
    <button type="action" name="act_character" >Character</button>
    <button type="action" name="act_combat" >Combat</button>
    <button type="action" name="act_patron" >Patron</button>
</div>

<div class="sheet-character">
  <div class="row">
    <div class="column">
      <div>
        <img class="logo" src="https://cubicle7games.com/media/wysiwyg/IM-Logo-Banner.png"/>
      </div>
      <div class="inputitem">
          <input class="textinput" type="text" id="character_name" name="attr_character_name">
          <label class="textinput_label" for="character_name">Character Name</label>
        </div> 
    </div>

    <div class="column margintop">
      <div class="row">
        <div class="inputitem">
          <input class="textinput" type="text" id="origin" name="attr_origin">
          <label class="textinput_label" for="origin">Origin</label>
        </div>
        <div class="inputitem">
          <input class="textinput" type="text" id="faction" name="attr_faction">
          <label class="textinput_label" for="faction">Faction</label>
        </div>
        <div class="inputitem">
          <input class="textinput" type="text" id="role" name="attr_role">
          <label class="textinput_label" for="role">Role</label>
        </div>
        <div class="inputitem">
          <input class="textinput" type="text" id="patron" name="attr_patron">
          <label class="textinput_label" for="patron">Patron</label>
        </div>
      </div>
      
      <div class="row">
        <div class="inputitem">
          <input class="textinput" type="text" id="age" name="attr_age">
          <label class="textinput_label" for="age">Age</label>
        </div>

        <div class="inputitem">
          <input class="textinput" type="text" id="eyes" name="attr_eyes">
          <label class="textinput_label" for="eyes">Eyes</label>
        </div>

        <div class="inputitem">
          <input class="textinput" type="text" id="hair" name="attr_hair">
          <label class="textinput_label" for="hair">Hair</label>
        </div>
        
        <div class="inputitem">
          <input class="textinput" type="text" id="height" name="attr_height">
          <label class="textinput_label" for="height">Height</label>
        </div>

        <div class="inputitem">
          <input class="textinput" type="text" id="weight" name="attr_weight">
          <label class="textinput_label" for="weight">Weight</label>
        </div>

        <div class="inputitem">
          <input class="textinput" type="text" id="handedness" name="attr_handedness">
          <label class="textinput_label" for="handedness">Handedness</label>
        </div>
      </div>

      <div class="row">
        <div class="inputitem">
          <input class="textinput" type="text" id="distinguishing_features" name="attr_distinguishing_features">
          <label class="textinput_label" for="distinguishing_features">Distinguishing Features</label>
        </div>
        <div class="inputitem">
          <input class="textinput smallinput" type="text" id="xp_current" name="attr_xp_current">
          <label class="textinput_label" for="xp_current">Current</label>
        </div>
        / XP
        <div class="inputitem">
          <input class="textinput smallinput" type="text" id="xp_spent" name="attr_xp_spent">
          <label class="textinput_label" for="xp_spent">Spent</label>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="row margintop fullwidth">
      <div class="column">
        <div class="sectionheader">
          ------CHARACTERISTICS------
        </div>
        <div class="row">
          <div class="characteristicstable">
            <div>&nbsp;</div>
            <div>
              <button type="action" value="current_ws|Weapon Skill|characteristic" name="act_imroll">
                WS
              </button>
            </div>
            <div>
              <button type="action" value="current_bs|Ballistic Skill|characteristic" name="act_imroll">
                BS
              </button>
            </div>
            <div>
              <button type="action" value="current_str|Strength|characteristic" name="act_imroll">
                STR
              </button>
            </div>
            <div>
              <button type="action" value="current_tgh|Toughness|characteristic" name="act_imroll">
                TGH
              </button>
            </div>
            <div>
              <button type="action" value="current_ag|Agility|characteristic" name="act_imroll">
                AG
              </button>
            </div>
            <div>
              <button type="action" value="current_int|Intelligence|characteristic" name="act_imroll">
                INT
              </button>
            </div>
            <div>
              <button type="action" value="current_per|Perception|characteristic" name="act_imroll">
                PER
              </button>
            </div>
            <div>
              <button type="action" value="current_wil|Willpower|characteristic" name="act_imroll">
                WIL
              </button>
            </div>
            <div>
              <button type="action" value="current_fel|Fellowship|characteristic" name="act_imroll">
                FEL
              </button>
            </div>

            <div>Starting</div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_ws" name="attr_starting_ws">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_bs" name="attr_starting_bs">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_str" name="attr_starting_str">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_tgh" name="attr_starting_tgh">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_ag" name="attr_starting_ag">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_int" name="attr_starting_int">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_per" name="attr_starting_per">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_wil" name="attr_starting_wil">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="starting_fel" name="attr_starting_fel">
            </div>

            <div>Advances</div>
            <div class="inputitem">
              <select class="width100" id="advances_ws" name="attr_advances_ws">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_bs" name="attr_advances_bs">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_str" name="attr_advances_str">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_tgh" name="attr_advances_tgh">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_ag" name="attr_advances_ag">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_int" name="attr_advances_int">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_per" name="attr_advances_per">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_wil" name="attr_advances_wil">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div class="inputitem">
              <select class="width100" id="advances_fel" name="attr_advances_fel">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>

            <div>Current</div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_ws" name="attr_current_ws">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_bs" name="attr_current_bs">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_str" name="attr_current_str">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_tgh" name="attr_current_tgh">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_ag" name="attr_current_ag">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_int" name="attr_current_int">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_per" name="attr_current_per">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_wil" name="attr_current_wil">
            </div>
            <div class="inputitem">
              <input class="textinput smallinput" type="text" id="current_fel" name="attr_current_fel">
            </div>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="sectionheader">
          --FATE--
        </div>
        <div class="row">
          <div class="inputitem">
            <input class="textinput smallinput" type="text" id="fate_current" name="attr_fate_current">
            <label class="textinput_label" for="fate_current">Current</label>
          </div>
          <div class="inputitem">
            <input class="textinput smallinput" type="text" id="fate_spent" name="attr_fate_spent">
            <label class="textinput_label" for="fate_spent">Spent</label>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="sectionheader">
          --CORRUPTION--
        </div>
        <div class="row">
          <div class="inputitem">
            <input class="textinput smallinput" type="text" id="corruption_total" name="attr_corruption_total">
            <label class="textinput_label" for="corruption_total">Total</label>
          </div>
          <div class="inputitem">
            <textarea class="textinput smallinput" id="corruption_mutations" name="attr_corruption_mutations"></textarea>
            <label class="textinput_label" for="corruption_mutations">Mutations</label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row sectionheader margintop fullwidth">
    ------ SKILLS & SPECIALISATIONS ------
  </div>

  <div class="row">
    <div class="row fullwidth">
      <div class="column">
        <div class="row">
          <div class="skillstable">
            <div>Skill</div>
            <div>Char</div>
            <div>Adv (+5 each)</div>
            <div>Total</div>

            <div>
              <button type="action" value="skill_athletics|Athletics|skill" name="act_imroll">
                ATHLETICS
              </button>
            </div>
            <div>STR</div>
            <div>
              <select class="width100" id="skill_adv_athletics" name="attr_skill_adv_athletics">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div>
              <input class="textinput" type="text" id="skill_athletics" name="attr_skill_athletics"></div>
            <div>
              <button type="action" value="skill_awareness|Awareness|skill" name="act_imroll">
                AWARENESS
              </button>
            </div>
            <div>PER</div>
            <div>
              <select class="width100" id="skill_adv_awareness" name="attr_skill_adv_awareness">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_awareness" name="attr_skill_awareness"></div>

            <div>
              <button type="action" value="skill_dexterity|Dexterity|skill" name="act_imroll">
                DEXTERITY
              </button>
            </div>
            <div>AG</div>
            <div>
              <select class="width100" id="skill_adv_dexterity" name="attr_skill_adv_dexterity">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_dexterity" name="attr_skill_dexterity"></div>

            <div>
              <button type="action" value="skill_discipline|Discipline|skill" name="act_imroll">
                DISCIPLINE
              </button>
            </div>
            <div>WIL</div>
            <div>
              <select class="width100" id="skill_adv_discipline" name="attr_skill_adv_discipline">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_discipline" name="attr_skill_discipline"></div>

            <div>
              <button type="action" value="skill_fortitude|Fortitude|skill" name="act_imroll">
                FORTITUDE
              </button>
            </div>
            <div>TGH</div>
            <div>
              <select class="width100" id="skill_adv_fortitude" name="attr_skill_adv_fortitude">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_fortitude" name="attr_skill_fortitude"></div>

            <div>
              <button type="action" value="skill_intuition|Intuition|skill" name="act_imroll">
                INTUITION
              </button>
            </div>
            <div>PER</div>
            <div>
              <select class="width100" id="skill_adv_intuition" name="attr_skill_adv_intuition">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_intuition" name="attr_skill_intuition"></div>

            <div>
              <button type="action" value="skill_linguistics|Linguistics|skill" name="act_imroll">
                LINGUISTICS
              </button>
            </div>
            <div>INT</div>
            <div>
              <select class="width100" id="skill_adv_linguistics" name="attr_skill_adv_linguistics">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_linguistics" name="attr_skill_linguistics"></div>

            <div>
              <button type="action" value="skill_logic|Logic|skill" name="act_imroll">
                LOGIC
              </button>
            </div>
            <div>INT</div>
            <div>
              <select class="width100" id="skill_adv_logic" name="attr_skill_adv_logic">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_logic" name="attr_skill_logic"></div>

            <div>
              <button type="action" value="skill_lore|Lore|skill" name="act_imroll">
                LORE
              </button>
            </div>
            <div>INT</div>
            <div>
              <select class="width100" id="skill_adv_lore" name="attr_skill_adv_lore">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_lore" name="attr_skill_lore"></div>

            <div>
              <button type="action" value="skill_medicae|Medicae|skill" name="act_imroll">
                MEDICAE
              </button>
            </div>
            <div>INT</div>
            <div>
              <select class="width100" id="skill_adv_medicae" name="attr_skill_adv_medicae">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_medicae" name="attr_skill_medicae"></div>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="row">
          <div class="skillstable">
            <div>Skill</div>
            <div>Char</div>
            <div>Adv (+5 each)</div>
            <div>Total</div>

            <div>
              <button type="action" value="skill_melee|Melee|skill" name="act_imroll">
                MELEE
              </button>
            </div>
            <div>WS</div>
            <div>
              <select class="width100" id="skill_adv_melee" name="attr_skill_adv_melee">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_melee" name="attr_skill_melee"></div>

            <div>
              <button type="action" value="skill_navigation|Navigation|skill" name="act_imroll">
                NAVIGATION
              </button>
            </div>
            <div>INT</div>
            <div>
              <select class="width100" id="skill_adv_navigation" name="attr_skill_adv_navigation">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_navigation" name="attr_skill_navigation"></div>

            <div>
              <button type="action" value="skill_presence|Presence|skill" name="act_imroll">
                PRESENCE
              </button>
            </div>
            <div>WIL</div>
            <div>
              <select class="width100" id="skill_adv_presence" name="attr_skill_adv_presence">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_presence" name="attr_skill_presence"></div>

            <div>
              <button type="action" value="skill_piloting|Piloting|skill" name="act_imroll">
                PILOTING
              </button>
            </div>
            <div>AG</div>
            <div>
              <select class="width100" id="skill_adv_piloting" name="attr_skill_adv_piloting">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_piloting" name="attr_skill_piloting"></div>

            <div>
              <button type="action" value="skill_psychic_mastery|Psychic Mastery|skill" name="act_imroll">
                PSYCHIC MASTERY
              </button>
            </div>
            <div>WIL</div>
            <div>
              <select class="width100" id="skill_adv_psychic_mastery" name="attr_skill_adv_psychic_mastery">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>            
            <div><input class="textinput" type="text" id="skill_psychic_mastery" name="attr_skill_psychic_mastery"></div>

            <div>
              <button type="action" value="skill_ranged|Ranged|skill" name="act_imroll">
                RANGED
              </button>
            </div>
            <div>BS</div>
            <div>
              <select class="width100" id="skill_adv_ranged" name="attr_skill_adv_ranged">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_ranged" name="attr_skill_ranged"></div>

            <div>
              <button type="action" value="skill_rapport|Rapport|skill" name="act_imroll">
                RAPPORT
              </button>
            </div>
            <div>FEL</div>
            <div>
              <select class="width100" id="skill_adv_rapport" name="attr_skill_adv_rapport">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_rapport" name="attr_skill_rapport"></div>

            <div>
              <button type="action" value="skill_reflexes|Reflexes|skill" name="act_imroll">
                REFLEXES
              </button>
            </div>
            <div>AG</div>
            <div>
              <select class="width100" id="skill_adv_reflexes" name="attr_skill_adv_reflexes">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_reflexes" name="attr_skill_reflexes"></div>

            <div>
              <button type="action" value="skill_stealth|Stealth|skill" name="act_imroll">
                STEALTH
              </button>
            </div>
            <div>AG</div>
            <div>
              <select class="width100" id="skill_adv_stealth" name="attr_skill_adv_stealth">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_stealth" name="attr_skill_stealth"></div>

            <div>
              <button type="action" value="skill_tech|Tech|skill" name="act_imroll">
                TECH
              </button>
            </div>
            <div>INT</div>
            <div>
              <select class="width100" id="skill_adv_tech" name="attr_skill_adv_tech">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="skill_tech" name="attr_skill_tech"></div>
          </div>
        </div>
      </div>

      <div class="column">
        <div class="row">
          <input type="hidden" id="specialisation_name" name="attr_specialisation_name">
          <div class="specialisationtable">
            <div class="row">Specialisation</div>
            <div>Skill</div>
            <div>Adv (+5 each)</div>
            <div>Total</div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation1" name="attr_specialisation1">
              <button type="action" value="specialisation1|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation1_skill" name="attr_specialisation1_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation1_adv" name="attr_skill_adv_specialisation1_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation1_total" name="attr_specialisation1_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation2" name="attr_specialisation2">
              <button type="action" value="specialisation2|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation2_skill" name="attr_specialisation2_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation2_adv" name="attr_skill_adv_specialisation2_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation2_total" name="attr_specialisation2_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation3" name="attr_specialisation3">
              <button type="action" value="specialisation3|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation3_skill" name="attr_specialisation3_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation3_adv" name="attr_skill_adv_specialisation3_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation3_total" name="attr_specialisation3_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation4" name="attr_specialisation4">
              <button type="action" value="specialisation4|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation4_skill" name="attr_specialisation4_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation4_adv" name="attr_skill_adv_specialisation4_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation4_total" name="attr_specialisation4_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation5" name="attr_specialisation5">
              <button type="action" value="specialisation5|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation5_skill" name="attr_specialisation5_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation5_adv" name="attr_skill_adv_specialisation5_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation5_total" name="attr_specialisation5_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation6" name="attr_specialisation6">
              <button type="action" value="specialisation6|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation6_skill" name="attr_specialisation6_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation6_adv" name="attr_skill_adv_specialisation6_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation6_total" name="attr_specialisation6_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation7" name="attr_specialisation7">
              <button type="action" value="specialisation7|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation7_skill" name="attr_specialisation7_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation7_adv" name="attr_skill_adv_specialisation7_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation7_total" name="attr_specialisation7_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation8" name="attr_specialisation8">
              <button type="action" value="specialisation8|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation8_skill" name="attr_specialisation8_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation8_adv" name="attr_skill_adv_specialisation8_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation8_total" name="attr_specialisation8_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation9" name="attr_specialisation9">
              <button type="action" value="specialisation1|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation9_skill" name="attr_specialisation9_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation9_adv" name="attr_skill_adv_specialisation9_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation9_total" name="attr_specialisation9_total"></div>

            <div class="row">
              <input class="textinput" type="text" id="specialisation10" name="attr_specialisation10">
              <button type="action" value="specialisation10|Specialisation|specialisation" name="act_imroll">*</button>
            </div>
            <div>
              <select class="width100" id="specialisation10_skill" name="attr_specialisation10_skill">
                <option value=""></option>
                <option value="athletics">Athletics</option>
                <option value="awareness">Awareness</option>
                <option value="dexterity">Dexterity</option>
                <option value="discipline">Discipline</option>
                <option value="fortitude">Fortitude</option>
                <option value="intuition">Intuition</option>
                <option value="linguistics">Linguistics</option>
                <option value="logic">Logic</option>
                <option value="lore">Lore</option>
                <option value="medicae">Medicae</option>
                <option value="melee">Melee</option>
                <option value="navigation">Navigation</option>
                <option value="presence">Presence</option>
                <option value="piloting">Piloting</option>
                <option value="psychic_mastery">Psychic Mastery</option>
                <option value="ranged">Ranged</option>
                <option value="rapport">Rapport</option>
                <option value="reflexes">Reflexes</option>
                <option value="stealth">Stealth</option>
                <option value="tech">Tech</option>
              </select>
            </div>
            <div>
              <select class="width100" id="skill_adv_specialisation10_adv" name="attr_skill_adv_specialisation10_adv">
                <option value="0">0</option>
                <option value="5">+5</option>
                <option value="10">+10</option>
                <option value="15">+15</option>
                <option value="20">+20</option>
              </select>
            </div>
            <div><input class="textinput" type="text" id="specialisation10_total" name="attr_specialisation10_total"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="side">
      <div class="column">
        <div class="sectionheader">
          ------GOALS------
        </div>
        <div class="inputitem">
          <textarea class="textinput smallinput" id="goals" name="attr_goals" rows="5"></textarea>
        </div>
        <div class="sectionheader">
          ----CONNECTIONS----
        </div>
        <div class="inputitem">
          <textarea class="textinput smallinput" id="connections" name="attr_connections" rows="5"></textarea>
        </div>
        <div class="sectionheader">
          ------NOTES------
        </div>
        <div class="inputitem">
          <textarea class="textinput smallinput" id="notes" name="attr_notes" rows="19"></textarea>
        </div>
        <div class="sectionheader">
          ------DIVINATION------
        </div>
        <div class="inputitem">
          <textarea class="textinput smallinput" id="divination" name="attr_divination" rows="5"></textarea>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="column">
        <div class="sectionheader">
          ------INFLUENCE------
        </div>
        <div class="row">
          <div class="influencetable">
            <div>FACTION</div>
            <div>INFL</div>
            <div>CONTACTS</div>

            <div><input class="textinput" type="text" id="faction1" name="attr_faction1"></div>
            <div><input class="textinput" type="text" id="infl1" name="attr_infl1"></div>
            <div><input class="textinput" type="text" id="contacts1" name="attr_contacts1"></div>

            <div><input class="textinput" type="text" id="faction2" name="attr_faction2"></div>
            <div><input class="textinput" type="text" id="infl2" name="attr_infl2"></div>
            <div><input class="textinput" type="text" id="contacts2" name="attr_contacts2"></div>

            <div><input class="textinput" type="text" id="faction3" name="attr_faction3"></div>
            <div><input class="textinput" type="text" id="infl3" name="attr_infl3"></div>
            <div><input class="textinput" type="text" id="contacts3" name="attr_contacts3"></div>

            <div><input class="textinput" type="text" id="faction4" name="attr_faction4"></div>
            <div><input class="textinput" type="text" id="infl4" name="attr_infl4"></div>
            <div><input class="textinput" type="text" id="contacts1" name="attr_contact4"></div>

            <div><input class="textinput" type="text" id="faction5" name="attr_faction5"></div>
            <div><input class="textinput" type="text" id="infl5" name="attr_infl5"></div>
            <div><input class="textinput" type="text" id="contacts5" name="attr_contacts5"></div>

            <div><input class="textinput" type="text" id="faction6" name="attr_faction6"></div>
            <div><input class="textinput" type="text" id="infl6" name="attr_infl6"></div>
            <div><input class="textinput" type="text" id="contacts6" name="attr_contacts6"></div>

            <div><input class="textinput" type="text" id="faction7" name="attr_faction7"></div>
            <div><input class="textinput" type="text" id="infl7" name="attr_infl7"></div>
            <div><input class="textinput" type="text" id="contacts7" name="attr_contacts7"></div>

            <div><input class="textinput" type="text" id="faction8" name="attr_faction8"></div>
            <div><input class="textinput" type="text" id="infl8" name="attr_infl8"></div>
            <div><input class="textinput" type="text" id="contacts8" name="attr_contacts8"></div>

            <div><input class="textinput" type="text" id="faction9" name="attr_faction9"></div>
            <div><input class="textinput" type="text" id="infl9" name="attr_infl9"></div>
            <div><input class="textinput" type="text" id="contacts9" name="attr_contacts9"></div>

          </div>
        </div>

        <div class="sectionheader">
          ------TALENTS------
        </div>
        <div class="row">
          <div class="talenttable">
            <div>NAME</div>
            <div>EFFECT</div>

            <div><input class="textinput" type="text" id="talent1" name="attr_talent1"></div>
            <div><input class="textinput" type="text" id="talent_effect1" name="attr_talent_effect1"></div>

            <div><input class="textinput" type="text" id="talent2" name="attr_talent2"></div>
            <div><input class="textinput" type="text" id="talent_effect2" name="attr_talent_effect2"></div>

            <div><input class="textinput" type="text" id="talent3" name="attr_talent3"></div>
            <div><input class="textinput" type="text" id="talent_effect3" name="attr_talent_effect3"></div>

            <div><input class="textinput" type="text" id="talent4" name="attr_talent4"></div>
            <div><input class="textinput" type="text" id="talent_effect4" name="attr_talent_effect4"></div>

            <div><input class="textinput" type="text" id="talent5" name="attr_talent5"></div>
            <div><input class="textinput" type="text" id="talent_effect5" name="attr_talent_effect5"></div>

            <div><input class="textinput" type="text" id="talent6" name="attr_talent6"></div>
            <div><input class="textinput" type="text" id="talent_effect6" name="attr_talent_effect6"></div>

            <div><input class="textinput" type="text" id="talent7" name="attr_talent7"></div>
            <div><input class="textinput" type="text" id="talent_effect7" name="attr_talent_effect7"></div>

            <div><input class="textinput" type="text" id="talent8" name="attr_talent8"></div>
            <div><input class="textinput" type="text" id="talent_effect8" name="attr_talent_effect8"></div>

            <div><input class="textinput" type="text" id="talent9" name="attr_talent9"></div>
            <div><input class="textinput" type="text" id="talent_effect9" name="attr_talent_effect9"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="sheet-combat">
  <div class="row fullwidth">
    <div class="side">
      <div class="column">
        <div class="sectionheader">
          --INITIATIVE<button type="roll" value="/roll (floor(@{current_ag} / 10) % 10) + (floor(@{current_per} / 10) % 10) &{tracker}"></button>--
        </div>
        <div class="inputitem">
          <textarea class="textinput" id="initiative" name="attr_initiative" rows="5"></textarea>
        </div>
        <div class="row">
          <div class="smalltable">
            <div>Melee</div>
            <div>Ranged</div>
            <div>Reflexes</div>

            <div><input class="textinput" type="text" id="initiative_melee" name="attr_initiative_melee"></div>
            <div><input class="textinput" type="text" id="initiative_ranged" name="attr_initiative_ranged"></div>
            <div><input class="textinput" type="text" id="initiative_reflexes" name="attr_initiative_reflexes"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="column">
      <div class="sectionheader">
        ------WOUNDS------
      </div>
      <div class="row">
        <div class="inputitem">
          <input class="textinput smallinput" type="text" id="wounds_current" name="attr_wounds_current">
          <label class="textinput_label" for="wounds_maximum">Current</label>
        </div>
        /
        <div class="inputitem">
          <input class="textinput smallinput" type="text" id="wounds_maximum" name="attr_wounds_maximum">
          <label class="textinput_label" for="wounds_maximum">Maximum</label>
        </div>
      </div>
    </div>
    <div class="column">
      <div class="sectionheader">
        ------CRITICAL WOUNDS------
      </div>
      <div class="row">
        <div class="criticalwoundstable">
          <div>LOCATION</div>
          <div>EFFECT</div>

          <div><input class="textinput" type="text" id="wound_location1" name="attr_wound_location1"></div>
          <div><input class="textinput" type="text" id="wound_effect1" name="attr_wound_effect1"></div>

          <div><input class="textinput" type="text" id="wound_location2" name="attr_wound_location2"></div>
          <div><input class="textinput" type="text" id="wound_effect2" name="attr_wound_effect2"></div>

          <div><input class="textinput" type="text" id="wound_location3" name="attr_wound_location3"></div>
          <div><input class="textinput" type="text" id="wound_effect3" name="attr_wound_effect3"></div>

          <div><input class="textinput" type="text" id="wound_location4" name="attr_wound_location4"></div>
          <div><input class="textinput" type="text" id="wound_effect4" name="attr_wound_effect4"></div>

          <div><input class="textinput" type="text" id="wound_location5" name="attr_wound_location5"></div>
          <div><input class="textinput" type="text" id="wound_effect5" name="attr_wound_effect5"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="row sectionheader margintop fullwidth">
    ------WEAPONS------
  </div>
  <div class="row">
    <input type="hidden" id="weapon_name" name="attr_weapon_name">
    <div class="weaponstable">
      <div>NAME</div>
      <div>SPECIALISATION</div>
      <div>TEST</div>
      <div>DAMAGE</div>
      <div>RANGE</div>
      <div>MAG</div>
      <div>ENC</div>
      <div>TRAITS</div>

      <div class="row">
        <input class="textinput" type="text" id="weapon_name1" name="attr_weapon_name1">
        <button type="action" value="weapon_test1|1|weapon" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="weapon_specialisation1" name="attr_weapon_specialisation1"></div>
      <div><input class="textinput" type="text" id="weapon_test1" name="attr_weapon_test1"></div>
      <div><input class="textinput" type="text" id="weapon_damage1" name="attr_weapon_damage1"></div>
      <div><input class="textinput" type="text" id="weapon_range1" name="attr_weapon_range1"></div>
      <div><input class="textinput" type="text" id="weapon_mag1" name="attr_weapon_mag1"></div>
      <div><input class="textinput" type="text" id="weapon_enc1" name="attr_weapon_enc1"></div>
      <div><input class="textinput" type="text" id="weapon_traits1" name="attr_weapon_traits1"></div>

      <div class="row">
        <input class="textinput" type="text" id="weapon_name2" name="attr_weapon_name2">
        <button type="action" value="weapon_test2|2|weapon" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="weapon_specialisation2" name="attr_weapon_specialisation2"></div>
      <div><input class="textinput" type="text" id="weapon_test2" name="attr_weapon_test2"></div>
      <div><input class="textinput" type="text" id="weapon_damage2" name="attr_weapon_damage2"></div>
      <div><input class="textinput" type="text" id="weapon_range2" name="attr_weapon_range2"></div>
      <div><input class="textinput" type="text" id="weapon_mag2" name="attr_weapon_mag2"></div>
      <div><input class="textinput" type="text" id="weapon_enc2" name="attr_weapon_enc2"></div>
      <div><input class="textinput" type="text" id="weapon_traits2" name="attr_weapon_traits2"></div>

      <div class="row">
        <input class="textinput" type="text" id="weapon_name3" name="attr_weapon_name3">
        <button type="action" value="weapon_test3|3|weapon" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="weapon_specialisation3" name="attr_weapon_specialisation3"></div>
      <div><input class="textinput" type="text" id="weapon_test3" name="attr_weapon_test3"></div>
      <div><input class="textinput" type="text" id="weapon_damage3" name="attr_weapon_damage3"></div>
      <div><input class="textinput" type="text" id="weapon_range3" name="attr_weapon_range3"></div>
      <div><input class="textinput" type="text" id="weapon_mag3" name="attr_weapon_mag3"></div>
      <div><input class="textinput" type="text" id="weapon_enc3" name="attr_weapon_enc3"></div>
      <div><input class="textinput" type="text" id="weapon_traits3" name="attr_weapon_traits3"></div>

      <div class="row">
        <input class="textinput" type="text" id="weapon_name4" name="attr_weapon_name4">
        <button type="action" value="weapon_test4|4|weapon" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="weapon_specialisation4" name="attr_weapon_specialisation4"></div>
      <div><input class="textinput" type="text" id="weapon_test4" name="attr_weapon_test4"></div>
      <div><input class="textinput" type="text" id="weapon_damage4" name="attr_weapon_damage4"></div>
      <div><input class="textinput" type="text" id="weapon_range4" name="attr_weapon_range4"></div>
      <div><input class="textinput" type="text" id="weapon_mag4" name="attr_weapon_mag4"></div>
      <div><input class="textinput" type="text" id="weapon_enc4" name="attr_weapon_enc4"></div>
      <div><input class="textinput" type="text" id="weapon_traits4" name="attr_weapon_traits4"></div>

      <div class="row">
        <input class="textinput" type="text" id="weapon_name5" name="attr_weapon_name5">
        <button type="action" value="weapon_test5|5|weapon" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="weapon_specialisation5" name="attr_weapon_specialisation5"></div>
      <div><input class="textinput" type="text" id="weapon_test5" name="attr_weapon_test5"></div>
      <div><input class="textinput" type="text" id="weapon_damage5" name="attr_weapon_damage5"></div>
      <div><input class="textinput" type="text" id="weapon_range5" name="attr_weapon_range5"></div>
      <div><input class="textinput" type="text" id="weapon_mag5" name="attr_weapon_mag5"></div>
      <div><input class="textinput" type="text" id="weapon_enc5" name="attr_weapon_enc5"></div>
      <div><input class="textinput" type="text" id="weapon_traits5" name="attr_weapon_traits5"></div>
    </div>
  </div>
  <div class="row sectionheader margintop fullwidth">
    ------ARMOUR------
  </div>
  <div class="row">
    <div class="column">
      <div class="armourtable">
        <div>NAME</div>
        <div>LOCATIONS</div>
        <div>ARMOUR</div>
        <div>ENC</div>
        <div>TRAITS</div>

        <div><input class="textinput" type="text" id="armour_name1" name="attr_armour_name1"></div>
        <div><input class="textinput" type="text" id="armour_locations1" name="attr_armour_locations1"></div>
        <div><input class="textinput" type="text" id="armour_armour1" name="attr_armour_armour1"></div>
        <div><input class="textinput" type="text" id="armour_enc1" name="attr_armour_enc1"></div>
        <div><input class="textinput" type="text" id="armour_traits1" name="attr_armour_traits1"></div>

        <div><input class="textinput" type="text" id="armour_name2" name="attr_armour_name2"></div>
        <div><input class="textinput" type="text" id="armour_locations2" name="attr_armour_locations2"></div>
        <div><input class="textinput" type="text" id="armour_armour2" name="attr_armour_armour2"></div>
        <div><input class="textinput" type="text" id="armour_enc2" name="attr_armour_enc2"></div>
        <div><input class="textinput" type="text" id="armour_traits2" name="attr_armour_traits2"></div>

        <div><input class="textinput" type="text" id="armour_name3" name="attr_armour_name3"></div>
        <div><input class="textinput" type="text" id="armour_locations3" name="attr_armour_locations3"></div>
        <div><input class="textinput" type="text" id="armour_armour3" name="attr_armour_armour3"></div>
        <div><input class="textinput" type="text" id="armour_enc3" name="attr_armour_enc3"></div>
        <div><input class="textinput" type="text" id="armour_traits3" name="attr_armour_traits3"></div>

        <div><input class="textinput" type="text" id="armour_name4" name="attr_armour_name4"></div>
        <div><input class="textinput" type="text" id="armour_locations4" name="attr_armour_locations4"></div>
        <div><input class="textinput" type="text" id="armour_armour4" name="attr_armour_armour4"></div>
        <div><input class="textinput" type="text" id="armour_enc4" name="attr_armour_enc4"></div>
        <div><input class="textinput" type="text" id="armour_traits4" name="attr_armour_traits4"></div>

        <div><input class="textinput" type="text" id="armour_name5" name="attr_armour_name5"></div>
        <div><input class="textinput" type="text" id="armour_locations5" name="attr_armour_locations5"></div>
        <div><input class="textinput" type="text" id="armour_armour5" name="attr_armour_armour5"></div>
        <div><input class="textinput" type="text" id="armour_enc5" name="attr_armour_enc5"></div>
        <div><input class="textinput" type="text" id="armour_traits5" name="attr_armour_traits5"></div>
      </div>
    </div>
    <div class="column">
      <div class="smalltable">
        <div>D10</div>
        <div>HIT LOCATION</div>
        <div>ARMOUR</div>
        <div>1</div>
        <div>HEAD</div>
        <div><input class="textinput" type="text" id="hit_location_armour1" name="attr_hit_location_armour1"></div>
        <div>2</div>
        <div>LEFT ARM</div>
        <div><input class="textinput" type="text" id="hit_location_armour2" name="attr_hit_location_armour2"></div>
        <div>3</div>
        <div>RIGHT ARM</div>
        <div><input class="textinput" type="text" id="hit_location_armour3" name="attr_hit_location_armour3"></div>
        <div>4</div>
        <div>LEFT LEG</div>
        <div><input class="textinput" type="text" id="hit_location_armour4" name="attr_hit_location_armour4"></div>
        <div>5</div>
        <div>RIGHT LEG</div>
        <div><input class="textinput" type="text" id="hit_location_armour5" name="attr_hit_location_armour5"></div>
        <div>6-10</div>
        <div>BODY</div>
        <div><input class="textinput" type="text" id="hit_location_armour6" name="attr_hit_location_armour6"></div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="column width50">
      <div class="sectionheader">
        ------COMBAT NOTES------
      </div>
      <div class="inputitem">
        <textarea rows="15" class="textinput" id="combat_notes" name="attr_combat_notes"></textarea>
      </div>
    </div>
    <div class="column width50">
      <div class="sectionheader">
        ------EQUIPMENT------
      </div>
      <div class="row">
        <div class="equipmenttable">

          <div><input class="textinput" type="text" id="equipment1" name="attr_equipment1"></div>
          <div><input class="textinput" type="text" id="equipment2" name="attr_equipment2"></div>
          <div><input class="textinput" type="text" id="equipment3" name="attr_equipment3"></div>

          <div><input class="textinput" type="text" id="equipment4" name="attr_equipment4"></div>
          <div><input class="textinput" type="text" id="equipment5" name="attr_equipment5"></div>
          <div><input class="textinput" type="text" id="equipment6" name="attr_equipment6"></div>

          <div><input class="textinput" type="text" id="equipment7" name="attr_equipment7"></div>
          <div><input class="textinput" type="text" id="equipment8" name="attr_equipment8"></div>
          <div><input class="textinput" type="text" id="equipment9" name="attr_equipment9"></div>

          <div><input class="textinput" type="text" id="equipment10" name="attr_equipment10"></div>
          <div><input class="textinput" type="text" id="equipment11" name="attr_equipment11"></div>
          <div><input class="textinput" type="text" id="equipment12" name="attr_equipment12"></div>

          <div><input class="textinput" type="text" id="equipment13" name="attr_equipment13"></div>
          <div><input class="textinput" type="text" id="equipment14" name="attr_equipment14"></div>
          <div><input class="textinput" type="text" id="equipment15" name="attr_equipment15"></div>

          <div><input class="textinput" type="text" id="equipment16" name="attr_equipment16"></div>
          <div><input class="textinput" type="text" id="equipment17" name="attr_equipment17"></div>
          <div><input class="textinput" type="text" id="equipment18" name="attr_equipment18"></div>

          <div><input class="textinput" type="text" id="equipment19" name="attr_equipment19"></div>
          <div><input class="textinput" type="text" id="equipment20" name="attr_equipment20"></div>
          <div class="miniheader">
            ENCUMBRANCE
            <div class="row">
              <div class="inputitem width40">
                <input class="textinput smallinput" type="text" id="encumbrance_current" name="attr_encumbrance_current">
                <label class="textinput_label minilabel" for="encumbrance_current">CURRENT</label>
              </div>
              <div class="inputitem width40">
                <input class="textinput smallinput" type="text" id="encumbrance_max" name="attr_encumbrance_max">
                <label class="textinput_label minilabel" for="encumbrance_max">MAXIMUM</label>
              </div>
            </div>
          </div>

          <div><input class="textinput" type="text" id="equipment21" name="attr_equipment21"></div>
          <div><input class="textinput" type="text" id="equipment22" name="attr_equipment22"></div>
          <div><input class="textinput" type="text" id="equipment23" name="attr_equipment23"></div>

          <div><input class="textinput" type="text" id="equipment24" name="attr_equipment24"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="row width100">
    <div class="sectionheader width100">
        ------PSYCHIC POWERS------
    </div>
  </div>
  <div class="row">
    <input type="hidden" id="psychic_wr" name="attr_psychic_wr">
    <input type="hidden" id="psychic_name" name="attr_psychic_name">
    <input type="hidden" id="psychic_difficulty" name="attr_psychic_difficulty">
    <input type="hidden" id="psychic_effect" name="attr_psychic_effect">
    <div class="psychictable">
      <div>NAME</div>
      <div>WR</div>
      <div>DIFFICULTY</div>
      <div>RANGE</div>
      <div>TARGET</div>
      <div>DURATION</div>
      <div>EFFECT</div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name1" name="attr_psychic_name1">
        <button type="action" value="psychic_test|1|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr1" name="attr_psychic_wr1"></div>
      <div>
        <select class="width100" id="psychic_difficulty1" name="attr_psychic_difficulty1">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range1" name="attr_psychic_range1"></div>
      <div><input class="textinput" type="text" id="psychic_target1" name="attr_psychic_target1"></div>
      <div><input class="textinput" type="text" id="psychic_duration1" name="attr_psychic_duration1"></div>
      <div><input class="textinput" type="text" id="psychic_effect1" name="attr_psychic_effect1"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name2" name="attr_psychic_name2">
        <button type="action" value="psychic_test|2|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr2" name="attr_psychic_wr2"></div>
      <div>
        <select class="width100" id="psychic_difficulty2" name="attr_psychic_difficulty2">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range2" name="attr_psychic_range2"></div>
      <div><input class="textinput" type="text" id="psychic_target2" name="attr_psychic_target2"></div>
      <div><input class="textinput" type="text" id="psychic_duration2" name="attr_psychic_duration2"></div>
      <div><input class="textinput" type="text" id="psychic_effect2" name="attr_psychic_effect2"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name3" name="attr_psychic_name3">
        <button type="action" value="psychic_test|3|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr3" name="attr_psychic_wr3"></div>
      <div>
        <select class="width100" id="psychic_difficulty3" name="attr_psychic_difficulty3">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range3" name="attr_psychic_range3"></div>
      <div><input class="textinput" type="text" id="psychic_target3" name="attr_psychic_target3"></div>
      <div><input class="textinput" type="text" id="psychic_duration3" name="attr_psychic_duration3"></div>
      <div><input class="textinput" type="text" id="psychic_effect3" name="attr_psychic_effect3"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name4" name="attr_psychic_name4">
        <button type="action" value="psychic_test|4|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr4" name="attr_psychic_wr4"></div>
      <div>
        <select class="width100" id="psychic_difficulty4" name="attr_psychic_difficulty4">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range4" name="attr_psychic_range4"></div>
      <div><input class="textinput" type="text" id="psychic_target4" name="attr_psychic_target4"></div>
      <div><input class="textinput" type="text" id="psychic_duration4" name="attr_psychic_duration4"></div>
      <div><input class="textinput" type="text" id="psychic_effect4" name="attr_psychic_effect4"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name5" name="attr_psychic_name5">
        <button type="action" value="psychic_test|5|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr5" name="attr_psychic_wr5"></div>
      <div>
        <select class="width100" id="psychic_difficulty5" name="attr_psychic_difficulty5">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range5" name="attr_psychic_range5"></div>
      <div><input class="textinput" type="text" id="psychic_target5" name="attr_psychic_target5"></div>
      <div><input class="textinput" type="text" id="psychic_duration5" name="attr_psychic_duration5"></div>
      <div><input class="textinput" type="text" id="psychic_effect5" name="attr_psychic_effect5"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name6" name="attr_psychic_name6">
        <button type="action" value="psychic_test|6|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr6" name="attr_psychic_wr6"></div>
      <div>
        <select class="width100" id="psychic_difficulty6" name="attr_psychic_difficulty6">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range6" name="attr_psychic_range6"></div>
      <div><input class="textinput" type="text" id="psychic_target6" name="attr_psychic_target6"></div>
      <div><input class="textinput" type="text" id="psychic_duration6" name="attr_psychic_duration6"></div>
      <div><input class="textinput" type="text" id="psychic_effect6" name="attr_psychic_effect6"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name7" name="attr_psychic_name7">
        <button type="action" value="psychic_test|7|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr7" name="attr_psychic_wr7"></div>
      <div>
        <select class="width100" id="psychic_difficulty7" name="attr_psychic_difficulty7">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range7" name="attr_psychic_range7"></div>
      <div><input class="textinput" type="text" id="psychic_target7" name="attr_psychic_target7"></div>
      <div><input class="textinput" type="text" id="psychic_duration7" name="attr_psychic_duration7"></div>
      <div><input class="textinput" type="text" id="psychic_effect7" name="attr_psychic_effect7"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name8" name="attr_psychic_name8">
        <button type="action" value="psychic_test|8|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr8" name="attr_psychic_wr8"></div>
      <div>
        <select class="width100" id="psychic_difficulty8" name="attr_psychic_difficulty8">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range8" name="attr_psychic_range8"></div>
      <div><input class="textinput" type="text" id="psychic_target8" name="attr_psychic_target8"></div>
      <div><input class="textinput" type="text" id="psychic_duration8" name="attr_psychic_duration8"></div>
      
      <div class="row">
        <div class="column width50">
          <input class="textinput" type="text" id="psychic_effect8" name="attr_psychic_effect8">
          <input class="textinput" type="text" id="psychic_effect9" name="attr_psychic_effect9">
          <input class="textinput" type="text" id="psychic_effect10" name="attr_psychic_effect10">
        </div>
        <div class="column width50 miniheader">
          WARP CHARGE
          <div class="row">
            <div class="inputitem width40">
              <input class="textinput smallinput" type="text" id="warp_charge_current" name="attr_warp_charge_current">
              <label class="textinput_label minilabel" for="warp_charge_current">CURRENT</label>
            </div>
            <div class="inputitem width40">
              <input class="textinput smallinput" type="text" id="warp_charge_threshold" name="attr_warp_charge_threshold">
              <label class="textinput_label minilabel" for="warp_charge_threshold">THRESHOLD</label>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name9" name="attr_psychic_name9">
        <button type="action" value="psychic_test|9|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr9" name="attr_psychic_wr9"></div>
      <div>
        <select class="width100" id="psychic_difficulty9" name="attr_psychic_difficulty9">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range9" name="attr_psychic_range9"></div>
      <div><input class="textinput" type="text" id="psychic_target9" name="attr_psychic_target9"></div>
      <div><input class="textinput" type="text" id="psychic_duration9" name="attr_psychic_duration9"></div>

      <div class="row">
        <input class="textinput" type="text" id="psychic_name10" name="attr_psychic_name10">
        <button type="action" value="psychic_test|10|psychic" name="act_imroll">*</button>
      </div>
      <div><input class="textinput" type="text" id="psychic_wr10" name="attr_psychic_wr10"></div>
      <div>
        <select class="width100" id="psychic_difficulty10" name="attr_psychic_difficulty10">
          <option value="0">Challenging (+0)</option>
          <option value="60">Very Easy (+60)</option>
          <option value="40">Easy (+40)</option>
          <option value="20">Routine (+20)</option>
          <option value="-10">Difficult (-10)</option>
          <option value="-10">Hard (-20)</option>
          <option value="-10">Very Hard (-30)</option>
        </select>
      </div>
      <div><input class="textinput" type="text" id="psychic_range10" name="attr_psychic_range10"></div>
      <div><input class="textinput" type="text" id="psychic_target10" name="attr_psychic_target10"></div>
      <div><input class="textinput" type="text" id="psychic_duration10" name="attr_psychic_duration10"></div>
    </div>
  </div>
</div>

<div class="sheet-patron">
  <div class="sheet-2colrow">
    <div class="sheet-col">
      <div>
        <img class="logo" src="https://cubicle7games.com/media/wysiwyg/IM-Logo-Banner.png"/>
      </div>
    </div>
    <div class="sheet-col">
      <h1>-----Patron Sheet-----</h1>
    </div>
  </div>

  <div class="sheet-3colrow margintop">
    <div class="sheet-col">
      <div class="inputitem">
        <input class="textinput" type="text" id="patron_name" name="attr_patron_name">
        <label class="textinput_label" for="patron_name">Patron Name</label>
      </div>
      <div class="inputitem">
        <input class="textinput" type="text" id="patron_pay_grade" name="attr_patron_pay_grade">
        <label class="textinput_label" for="patron_pay_grade">Pay Grade</label>
      </div>
    </div>
    <div class="sheet-col">
      <div class="inputitem">
        <input class="textinput" type="text" id="patron_faction" name="attr_patron_faction">
        <label class="textinput_label" for="patron_faction">Faction</label>
      </div>
      <div class="inputitem">
        <input class="textinput" type="text" id="patron_motivation" name="attr_patron_motivation">
        <label class="textinput_label" for="patron_motivation">Motivation</label>
      </div>
    </div>
    <div class="sheet-col">
      <div class="inputitem">
        <input class="textinput" type="text" id="patron_duty" name="attr_patron_duty">
        <label class="textinput_label" for="patron_dutty">Duty</label>
      </div>
      <div class="inputitem">
        <input class="textinput" type="text" id="patron_demeanour" name="attr_patron_demeanour">
        <label class="textinput_label" for="patron_demeanour">Demeanour</label>
      </div>
    </div>
  </div>
  <div class="sheet-2colrow">
    <div class="sheet-col">
      <div>
        <div class="sectionheader">
          ------BOONS------
        </div>
      </div>
      <div class="inputitem">
        <textarea rows="15" class="textinput" id="patron_boons" name="attr_patron_boons"></textarea>
      </div>
    </div>
    <div class="sheet-col">
      <div class="sectionheader">
        ------LIABILITIES------
      </div>
      <div class="inputitem">
        <textarea rows="15" class="textinput" id="patron_liabilities" name="attr_patron_liabilities"></textarea>
      </div>
    </div>
  </div>
  <div class="sheet-1colrow">
    <div class="sectionheader">
      ------INFLUENCE------
    </div>
    <div>
      <div class="patroninfluencetable">
        <div>FACTION</div>
        <div>INFL</div>
        <div>CONTACTS</div>
        <div>INTEL</div>

        <div><input class="textinput" type="text" id="patron_faction1" name="attr_patron_faction1"></div>
        <div><input class="textinput" type="text" id="patron_infl1" name="attr_patron_infl1"></div>
        <div><input class="textinput" type="text" id="patron_contacts1" name="attr_patron_contacts1"></div>
        <div><input class="textinput" type="text" id="patron_intel1" name="attr_patron_intel1"></div>

        <div><input class="textinput" type="text" id="patron_faction2" name="attr_patron_faction2"></div>
        <div><input class="textinput" type="text" id="patron_infl2" name="attr_patron_infl2"></div>
        <div><input class="textinput" type="text" id="patron_contacts2" name="attr_patron_contacts2"></div>
        <div><input class="textinput" type="text" id="patron_intel2" name="attr_patron_intel2"></div>

        <div><input class="textinput" type="text" id="patron_faction3" name="attr_patron_faction3"></div>
        <div><input class="textinput" type="text" id="patron_infl3" name="attr_patron_infl3"></div>
        <div><input class="textinput" type="text" id="patron_contacts3" name="attr_patron_contacts3"></div>
        <div><input class="textinput" type="text" id="patron_intel3" name="attr_patron_intel3"></div>

        <div><input class="textinput" type="text" id="patron_faction4" name="attr_patron_faction4"></div>
        <div><input class="textinput" type="text" id="patron_infl4" name="attr_patron_infl4"></div>
        <div><input class="textinput" type="text" id="patron_contacts4" name="attr_patron_contacts4"></div>
        <div><input class="textinput" type="text" id="patron_intel4" name="attr_patron_intel4"></div>

        <div><input class="textinput" type="text" id="patron_faction5" name="attr_patron_faction5"></div>
        <div><input class="textinput" type="text" id="patron_infl5" name="attr_patron_infl5"></div>
        <div><input class="textinput" type="text" id="patron_contacts5" name="attr_patron_contacts5"></div>
        <div><input class="textinput" type="text" id="patron_intel5" name="attr_patron_intel5"></div>

        <div><input class="textinput" type="text" id="patron_faction6" name="attr_patron_faction6"></div>
        <div><input class="textinput" type="text" id="patron_infl6" name="attr_patron_infl6"></div>
        <div><input class="textinput" type="text" id="patron_contacts6" name="attr_patron_contacts6"></div>
        <div><input class="textinput" type="text" id="patron_intel6" name="attr_patron_intel6"></div>

        <div><input class="textinput" type="text" id="patron_faction7" name="attr_patron_faction7"></div>
        <div><input class="textinput" type="text" id="patron_infl7" name="attr_patron_infl7"></div>
        <div><input class="textinput" type="text" id="patron_contacts7" name="attr_patron_contacts7"></div>
        <div><input class="textinput" type="text" id="patron_intel7" name="attr_patron_intel7"></div>

        <div><input class="textinput" type="text" id="patron_faction8" name="attr_patron_faction8"></div>
        <div><input class="textinput" type="text" id="patron_infl8" name="attr_patron_infl8"></div>
        <div><input class="textinput" type="text" id="patron_contacts8" name="attr_patron_contacts8"></div>
        <div><input class="textinput" type="text" id="patron_intel8" name="attr_patron_intel8"></div>

        <div><input class="textinput" type="text" id="patron_faction9" name="attr_patron_faction9"></div>
        <div><input class="textinput" type="text" id="patron_infl9" name="attr_patron_infl9"></div>
        <div><input class="textinput" type="text" id="patron_contacts9" name="attr_patron_contacts9"></div>
        <div><input class="textinput" type="text" id="patron_intel9" name="attr_patron_intel9"></div>

        <div><input class="textinput" type="text" id="patron_faction10" name="attr_patron_faction10"></div>
        <div><input class="textinput" type="text" id="patron_infl10" name="attr_patron_infl10"></div>
        <div><input class="textinput" type="text" id="patron_contacts10" name="attr_patron_contacts10"></div>
        <div><input class="textinput" type="text" id="patron_intel10" name="attr_patron_intel10"></div>

        <div><input class="textinput" type="text" id="patron_faction11" name="attr_patron_faction11"></div>
        <div><input class="textinput" type="text" id="patron_infl11" name="attr_patron_infl11"></div>
        <div><input class="textinput" type="text" id="patron_contacts11" name="attr_patron_contacts11"></div>
        <div><input class="textinput" type="text" id="patron_intel11" name="attr_patron_intel11"></div>
      </div>
    </div>
  </div>
  <div class="sheet-1colrow">
    <div class="sectionheader">
      ------NOTES------
    </div>
    <div class="inputitem">
      <textarea rows="15" class="textinput" id="patron_notes" name="attr_patron_notes"></textarea>
    </div>
  </div>
</div>

<!--Roll Template-->
<rolltemplate class="sheet-rolltemplate-im1ed">
	<table>
    <tr>
			<th colspan="2">
				<img alt="spacer" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Dark_Heresy_2ed/img/spacer.png"
					class="sheet-rolltemplate-spacer"></th>
		</tr>
		<tr>
			<th colspan="2" class="sheet-title">{{name}}</th>
		</tr>
		<tr>
			<th colspan="2">
				<img alt="spacer" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Dark_Heresy_2ed/img/spacer.png"
					class="sheet-rolltemplate-spacer"></th>
		</tr>
		<tr>
			<td><span class="sheet-tcat">Skill: </span></td>
			<td><span class="sheet-inlinerollresult">{{skill}}</span></td>
		</tr>
    <tr>
			<td><span class="sheet-tcat">Modifier: </span></td>
			<td><span class="sheet-inlinerollresult">{{computed::modifier}}</span></td>
		</tr>
    <tr class="sheet-topline">
			<th colspan="2"><span></span></th>
		</tr>
    <tr>
			<td><span class="sheet-tcat">Target: </span></td>
			<td><span class="sheet-inlinerollresult">{{computed::target}}</span></td>
		</tr>
		<tr>
			<th colspan="2">
				<img alt="spacer" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Dark_Heresy_2ed/img/spacer.png"
					class="sheet-rolltemplate-spacer sheet-invert">
			</th>
		</tr>
		<tr>
			<td><span class="sheet-tcat">dice roll: </span></td>
			<td><span class="sheet-inlinerollresult">{{roll}}</span></td>
		</tr>

    <!-- roll with advantage -->
    {{#rollGreater() advantage 0}}
		<tr>
			<td><span class="sheet-tcat">dice roll reversed (advantage): </span></td>
			<td><span class="sheet-inlinerollresult">{{computed::reversedroll}}</span></td>
		</tr>
      <!-- roll is greater than reversedroll -->
      {{#rollGreater() computed::degrees1 computed::degrees2}}
        {{#rollGreater() computed::degrees1 0}}
        <tr class="sheet-success">
          <th colspan="2">
            UsingA : {{computed::degrees1}} SL -- Discarding: ({{computed::degrees2}} SL)
            <br><span>Success with {{computed::degrees1}} </span> <span>SL </span>
          </th>
        </tr>
        {{/rollGreater() computed::degrees1 0}}

        {{#rollTotal() computed::degrees1 0}}
        {{#^rollLess() computed::target roll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Success with 0 </span> <span>SL </span>
          </th>
        </tr>
        {{/^rollLess() computed::target roll}}
        {{#rollLess() computed::target roll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Failure with 0</span> <span>SL </span> 
          </th>
        </tr>
        {{/rollLess() computed::target roll}}
        {{/rollTotal() computed::degrees1 0}}

        {{#rollLess() computed::degrees1 0}}
        <tr>
          <th colspan="2">
            UsingB : {{computed::degrees1}} SL -- Discarding: ({{computed::degrees2}} SL)
            <br><span>Failure</span> with {{computed::degrees1}} <span>SL</span>
          </th>
        </tr>
        {{/rollLess() computed::degrees1 0}}

        {{#computed::unitdigit}}
          {{#rollTotal() computed::unitdigit 0}}
            <tr>
              <th colspan="2">
                Hit Location: Body
              </th>
            </tr>
          {{/rollTotal() computed::unitdigit 0}}
          {{#rollTotal() computed::unitdigit 1}}
            <tr>
              <th colspan="2">
                Hit Location: Head
              </th>
            </tr>
          {{/rollTotal() computed::unitdigit 1}}
          {{#rollTotal() computed::unitdigit 2}}
            <tr>
              <th colspan="2">
                Hit Location: Left Arm
              </th>
            </tr>
          {{/rollTotal() computed::unitdigit 2}}
          {{#rollTotal() computed::unitdigit 3}}
            <tr>
              <th colspan="2">
                Hit Location: Right Arm
              </th>
            </tr>
          {{/rollTotal() computed::unitdigit 3}}
          {{#rollTotal() computed::unitdigit 4}}
            <tr>
              <th colspan="2">
                Hit Location: Left Leg
              </th>
            </tr>
          {{/rollTotal() computed::unitdigit 4}}
          {{#rollTotal() computed::unitdigit 5}}
            <tr>
              <th colspan="2">
                Hit Location: Right Leg
              </th>
            </tr>
          {{/rollTotal() computed::unitdigit 5}}
          {{#rollGreater() computed::unitdigit 5}}
            <tr>
              <th colspan="2">
                Hit Location: Body
              </th>
            </tr>
          {{/rollGreater() computed::unitdigit 5}}
        {{/computed::unitdigit}} 

      {{/rollGreater() computed::degrees1 computed::degrees2}}
      <!-- end roll is greater than reversedroll -->

      <!-- reversedroll is greater than roll -->
      {{#^rollGreater() computed::degrees1 computed::degrees2}}
        {{#rollGreater() computed::degrees2 0}}
        <tr class="sheet-success">
          <th colspan="2">
            UsingC : {{computed::degrees2}} SL -- Discarding: ({{computed::degrees1}} SL)
            <br><span>Success with {{computed::degrees2}} </span> <span>SL </span>
          </th>
        </tr>
        {{/rollGreater() computed::degrees2 0}}

        {{#rollTotal() computed::degrees2 0}}
        {{#^rollLess() computed::target computed::reversedroll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Success with 0 </span> <span>SL </span>
          </th>
        </tr>
        {{/^rollLess() computed::target computed::reversedroll}}
        {{#rollLess() computed::target computed::reversedroll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Failure with 0</span> <span>SL </span> 
          </th>
        </tr>
        {{/rollLess() computed::target computed::reversedroll}}
        {{/rollTotal() computed::degrees2 0}}
    
        {{#rollLess() computed::degrees2 0}}
        <tr class="sheet-failure">
          <th colspan="2">
            UsingD : {{computed::degrees2}} SL -- Discarding: ({{computed::degrees1}} SL)
            <br><span>Failure</span> with {{computed::degrees2}} <span>SL</span>
          </th>
        </tr>
        {{/rollLess() computed::degrees2 0}}

        {{#computed::reversedunitdigit}}
          {{#rollTotal() computed::reversedunitdigit 0}}
            <tr>
              <th colspan="2">
                Hit Location: Body
              </th>
            </tr>
          {{/rollTotal() computed::reversedunitdigit 0}}
          {{#rollTotal() computed::reversedunitdigit 1}}
            <tr>
              <th colspan="2">
                Hit Location: Head
              </th>
            </tr>
          {{/rollTotal() computed::reversedunitdigit 1}}
          {{#rollTotal() computed::reversedunitdigit 2}}
            <tr>
              <th colspan="2">
                Hit Location: Left Arm
              </th>
            </tr>
          {{/rollTotal() computed::reversedunitdigit 2}}
          {{#rollTotal() computed::reversedunitdigit 3}}
            <tr>
              <th colspan="2">
                Hit Location: Right Arm
              </th>
            </tr>
          {{/rollTotal() computed::reversedunitdigit 3}}
          {{#rollTotal() computed::reversedunitdigit 4}}
            <tr>
              <th colspan="2">
                Hit Location: Left Leg
              </th>
            </tr>
          {{/rollTotal() computed::reversedunitdigit 4}}
          {{#rollTotal() computed::reversedunitdigit 5}}
            <tr>
              <th colspan="2">
                Hit Location: Right Leg
              </th>
            </tr>
          {{/rollTotal() computed::reversedunitdigit 5}}
          {{#rollGreater() computed::reversedunitdigit 5}}
            <tr>
              <th colspan="2">
                Hit Location: Body
              </th>
            </tr>
          {{/rollGreater() computed::reversedunitdigit 5}}
        {{/computed::reversedunitdigit}} 
      {{/^rollGreater() computed::degrees1 computed::degrees2}}
      <!-- end reversedroll is greater than roll-->
		{{/rollGreater() advantage 0}}
    <!-- end roll with advantage -->

    <!-- roll with disadvantage -->
    {{#rollLess() advantage 0}}
		<tr>
			<td><span class="sheet-tcat">dice roll reversed (disadvantage): </span></td>
			<td><span class="sheet-inlinerollresult">{{computed::reversedroll}}</span></td>
		</tr>
      <!-- roll is greater than reversedroll -->
      {{#rollGreater() computed::degrees1 computed::degrees2}}
        {{#rollGreater() computed::degrees2 0}}
        <tr class="sheet-success">
          <th colspan="2">
            UsingA : {{computed::degrees2}} SL -- Discarding: ({{computed::degrees1}} SL)
            <br><span>Success with {{computed::degrees2}} </span> <span>SL </span>
          </th>
        </tr>
        {{/rollGreater() computed::degrees2 0}}

        {{#rollTotal() computed::degrees2 0}}
          {{#^rollGreater() computed::target computed::reversedroll}}
          <tr class="sheet-success">
            <th colspan="2">
              <span>Success with 0 </span> <span>SL </span>
            </th>
          </tr>
          {{/^rollGreater() computed::target computed::reversedroll}}
          {{#rollGreater() computed::target computed::reversedroll}}
          <tr class="sheet-failure">
            <th colspan="2">
              <span>Failure with 0</span> <span>SL </span> 
            </th>
          </tr>
          {{/rollGreater() computed::target computed::reversedroll}}
        {{/rollTotal() computed::degrees2 0}}
    
        {{#rollLess() computed::degrees2 0}}
        <tr class="sheet-failure">
          <th colspan="2">
            UsingB : {{computed::degrees2}} SL -- Discarding: ({{computed::degrees1}} SL)
            <br><span>Failure</span> with {{computed::degrees2}} <span>SL</span>
          </th>
        </tr>
        {{/rollLess() computed::degrees2 0}}
      {{/rollGreater() computed::degrees1 computed::degrees2}}

      <!-- reversedroll is greater than roll -->
      {{#^rollGreater() computed::degrees1 computed::degrees2}}
        {{#rollGreater() computed::degrees1 0}}
        <tr class="sheet-success">
          <th colspan="2">
            UsingC : {{computed::degrees1}} SL -- Discarding: ({{computed::degrees2}} SL)
            <br><span>Success with {{computed::degrees1}} </span> <span>SL </span>
          </th>
        </tr>
        {{/rollGreater() computed::degrees1 0}}

        {{#rollTotal() computed::degrees1 0}}
        {{#^rollLess() computed::target roll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Success with 0 </span> <span>SL </span>
          </th>
        </tr>
        {{/^rollLess() computed::target roll}}
        {{#rollLess() computed::target roll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Failure with 0</span> <span>SL </span> 
          </th>
        </tr>
        {{/rollLess() computed::target roll}}
        {{/rollTotal() computed::degrees1 0}}
    
        {{#rollLess() computed::degrees1 0}}
        <tr class="sheet-failure">
          <th colspan="2">
            UsingD : {{computed::degrees1}} SL -- Discarding: ({{computed::degrees2}} SL)
            <br><span>Failure</span> with {{computed::degrees1}} <span>SL</span>
          </th>
        </tr>
        {{/rollLess() computed::degrees1 0}}
      {{/^rollGreater() computed::degrees1 computed::degrees2}}
		{{/rollLess() advantage 0}}
    <!-- end roll with disadvantage -->

    <!-- roll no advantage -->
    {{#rollTotal() advantage 0}}
      {{#rollGreater() computed::degrees1 0}}
      <tr class="sheet-success">
        <th colspan="2">
          <span>Success with</span> {{computed::degrees1}} <span>SL </span>
        </th>
      </tr>
      {{/rollGreater() computed::degrees1 0}}
      {{#rollTotal() computed::degrees1 0}}
        {{#^rollLess() computed::target roll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Success with 0 </span> <span>SL </span>
          </th>
        </tr>
        {{/^rollLess() computed::target roll}}
        {{#rollLess() computed::target roll}}
        <tr class="sheet-success">
          <th colspan="2">
            <span>Failure with 0</span> <span>SL </span> 
          </th>
        </tr>
        {{/rollLess() computed::target roll}}
      {{/rollTotal() computed::degrees1 0}}
      {{#rollLess() computed::degrees1 0}}
      <tr class="sheet-failure">
        <th colspan="2">
          <span>Failure</span> with {{computed::degrees1}} <span>SL</span>
        </th>
      </tr>
      {{/rollLess() computed::degrees1 0}}

      {{#computed::unitdigit}}
        {{#rollTotal() computed::unitdigit 0}}
          <tr>
            <th colspan="2">
              Hit Location: Body
            </th>
          </tr>
        {{/rollTotal() computed::unitdigit 0}}
        {{#rollTotal() computed::unitdigit 1}}
          <tr>
            <th colspan="2">
              Hit Location: Head
            </th>
          </tr>
        {{/rollTotal() computed::unitdigit 1}}
        {{#rollTotal() computed::unitdigit 2}}
          <tr>
            <th colspan="2">
              Hit Location: Left Arm
            </th>
          </tr>
        {{/rollTotal() computed::unitdigit 2}}
        {{#rollTotal() computed::unitdigit 3}}
          <tr>
            <th colspan="2">
              Hit Location: Right Arm
            </th>
          </tr>
        {{/rollTotal() computed::unitdigit 3}}
        {{#rollTotal() computed::unitdigit 4}}
          <tr>
            <th colspan="2">
              Hit Location: Left Leg
            </th>
          </tr>
        {{/rollTotal() computed::unitdigit 4}}
        {{#rollTotal() computed::unitdigit 5}}
          <tr>
            <th colspan="2">
              Hit Location: Right Leg
            </th>
          </tr>
        {{/rollTotal() computed::unitdigit 5}}
        {{#rollGreater() computed::unitdigit 5}}
          <tr>
            <th colspan="2">
              Hit Location: Body
            </th>
          </tr>
        {{/rollGreater() computed::unitdigit 5}}
      {{/computed::unitdigit}} 
    {{/rollTotal() advantage 0}}
  
		{{#wr}}
		<tr>
			<td><span class="sheet-tcat">Difficulty: </span></td>
			<td>
        <span class="sheet-inlinerollresult">
          {{#difficulty}}
            {{ difficulty }}
            {{#rollTotal() difficulty 0}}
              Challenging (+0)
            {{/rollTotal() difficulty 0}}
            {{#rollTotal() difficulty 20}}
              Routine (+20)
            {{/rollTotal() difficulty 20}}
            {{#rollTotal() difficulty 40}}
              Easy (+40)
            {{/rollTotal() difficulty 40}}
            {{#rollTotal() difficulty 60}}
              Very Easy (+60)
            {{/rollTotal() difficulty 60}}
            {{#rollTotal() difficulty -10}}
              Difficult (-10)
            {{/rollTotal() difficulty -10}}
            {{#rollTotal() difficulty -20}}
              Hard (-20)
            {{/rollTotal() difficulty -20}}
            {{#rollTotal() difficulty -30}}
              Very Hard (-30)
            {{/rollTotal() difficulty -30}}
          {{/difficulty}}
        </span>
      </td>
		</tr>
    <tr>
			<td><span class="sheet-tcat">WR: </span></td>
			<td><span class="sheet-inlinerollresult">{{wr}}</span></td>
		</tr>
    <tr>
			<td><span class="sheet-tcat">Effect: </span></td>
			<td><span class="sheet-inlinerollresult">{{effect}}</span></td>
		</tr>
		{{/wr}}

    {{#computed::damage}}
    <tr>
      <th colspan="2">
        Damage: {{computed::damage}}
      </th>
    </tr>
		{{/computed::damage}}

		{{#initiative}}
		<tr>
			<td><span class="sheet-tcat">Result: </span></td>
			<td><span class="sheet-inlinerollresult">{{initiative}}</span></td>
		</tr>
		{{/initiative}}
	</table>
</rolltemplate>

<script type="text/worker">
  const buttonlist = ["character","combat","patron"];
  buttonlist.forEach(button => {
      on(`clicked:${button}`, function() {
        console.log(button);
        setAttrs({
            sheetTab: button
        });
      });
  });
  on('clicked:imroll', (info) => {
    let characteristic = info.htmlAttributes.value;
    const myArray = characteristic.split("|");
    const selected_characteristic = myArray[0];
    const selected_characteristic_name = myArray[1];
    const selected_rolltype = myArray[2];
    const debug = true;

    let roll_string = "&{template:im1ed} [[?{Advantage | None,+0 | Advantage,+1 | Advantage (+10),+2 | Advantage (+20),+3 | Disadvantage,-1  | Disadvantage (-10),-2 | Disadvantage (-20),-3}]][[[[floor((@{"+selected_characteristic+"} +[[ ?{Superiority | None,+0 | +1,+10 | +2,+20 | +3,+30 | +4,+40 | +5,+50 | +6,+60 | +7,+70 | +8,+80 | +9,+90 | +10,+100} + [[?{Modifier | None,+0 | +30,+30 | +20,+20 | +10,+10 | -30,-30 | -20,-20 | -10,-10 }]] ]])))]]]][[1d100]][[@{"+selected_characteristic+"}]] {{name="+selected_characteristic_name+"}}{{roll= $[[2]] }}{{degrees1=$[[3]]}}{{skill=[[@{"+selected_characteristic+"}]]}}{{modifier=$[[5]]}}{{advantage=$[[0]]}}{{reversedroll=$[[1]]}}{{target=$[[6]]}}{{degrees2=$[[4]]}}";
    if (selected_rolltype == 'skill') {
      roll_string = "&{template:im1ed} [[?{Advantage | None,+0 | Advantage,+1 | Advantage (+10),+2 | Advantage (+20),+3 | Disadvantage,-1  | Disadvantage (-10),-2 | Disadvantage (-20),-3}]][[[[floor((@{"+selected_characteristic+"} +[[ ?{Difficulty | Very Easy (+60),+60| Easy (+40),+40 | Routine (+20),+20 | Challenging (+0),+0 | Difficult (-10),-10 | Hard (-20),-20 | Very Hard (-30),-30} + ?{Superiority | None,+0 | +1,+10 | +2,+20 | +3,+30 | +4,+40 | +5,+50 | +6,+60 | +7,+70 | +8,+80 | +9,+90 | +10,+100} + [[?{Modifier | None,+0 | +30,+30 | +20,+20 | +10,+10 | -30,-30 | -20,-20 | -10,-10 }]] ]])))]]]][[1d100]][[@{"+selected_characteristic+"}]] {{name="+selected_characteristic_name+"}}{{roll= $[[2]] }}{{degrees1=$[[3]]}}{{skill=[[@{"+selected_characteristic+"}]]}}{{modifier=$[[5]]}}{{advantage=$[[0]]}}{{reversedroll=$[[1]]}}{{target=$[[6]]}}{{degrees2=$[[4]]}}";
    } else if (selected_rolltype == 'specialisation') {
      getAttrs([selected_characteristic], function(values) {
        let specialisation_name = values[selected_characteristic];
        setAttrs({
          "specialisation_name": specialisation_name
        });
      });

      let selected_specialisation = selected_characteristic+"_total";
      roll_string = "&{template:im1ed} [[?{Advantage | None,+0 | Advantage,+1 | Advantage (+10),+2 | Advantage (+20),+3 | Disadvantage,-1  | Disadvantage (-10),-2 | Disadvantage (-20),-3}]][[[[floor((@{"+selected_specialisation+"} +[[ ?{Difficulty | Very Easy (+60),+60| Easy (+40),+40 | Routine (+20),+20 | Challenging (+0),+0 | Difficult (-10),-10 | Hard (-20),-20 | Very Hard (-30),-30} + ?{Superiority | None,+0 | +1,+10 | +2,+20 | +3,+30 | +4,+40 | +5,+50 | +6,+60 | +7,+70 | +8,+80 | +9,+90 | +10,+100} + [[?{Modifier | None,+0 | +30,+30 | +20,+20 | +10,+10 | -30,-30 | -20,-20 | -10,-10 }]] ]])))]]]][[1d100]][[@{"+selected_specialisation+"}]] {{name=@{specialisation_name} }}{{roll= $[[2]] }}{{degrees1=$[[3]]}}{{skill=[[@{"+selected_specialisation+"}]]}}{{modifier=$[[5]]}}{{advantage=$[[0]]}}{{reversedroll=$[[1]]}}{{target=$[[6]]}}{{degrees2=$[[4]]}}";
    } else if (selected_rolltype == 'weapon') {
      let weapon_name_get = "weapon_name"+selected_characteristic_name;
      let weapon_damage_get = "weapon_damage"+selected_characteristic_name;

      getAttrs([weapon_name_get,weapon_damage_get], function(values) {
        let weapon_name = values[weapon_name_get];
        let weapon_damage = values[weapon_damage_get];

        setAttrs({
          "weapon_name": weapon_name,
          "weapon_damage": weapon_damage
        });
      });

      let selected_weapon_test = selected_characteristic;
      roll_string = "&{template:im1ed} [[?{Advantage | None,+0 | Advantage,+1 | Advantage (+10),+2 | Advantage (+20),+3 | Disadvantage,-1  | Disadvantage (-10),-2 | Disadvantage (-20),-3}]][[[[floor((@{"+selected_weapon_test+"} +[[ ?{Superiority | None,+0 | +1,+10 | +2,+20 | +3,+30 | +4,+40 | +5,+50 | +6,+60 | +7,+70 | +8,+80 | +9,+90 | +10,+100} + [[?{Modifier | None,+0 | +30,+30 | +20,+20 | +10,+10 | -30,-30 | -20,-20 | -10,-10 }]] ]])))]]]][[1d100]][[d1]][[d1]][[@{"+selected_weapon_test+"}]][[@{weapon_damage}]] {{name=@{weapon_name} }}{{roll= $[[2]] }}{{degrees1=$[[9]]}}{{skill=[[@{"+selected_weapon_test+"}]]}}{{modifier=$[[1]]}}{{advantage=$[[0]]}}{{reversedroll=$[[5]]}}{{target=$[[8]]}}{{degrees2=$[[4]]}}{{unitdigit=$[[7]]}}{{reversedunitdigit=$[[3]]}}{{damage=$[[6]]}}";
    } else if (selected_rolltype == 'psychic') {
      let wr_field = "psychic_wr"+selected_characteristic_name;
      let difficulty_field = "psychic_difficulty"+selected_characteristic_name;
      let name_field = "psychic_name"+selected_characteristic_name;
      let effect_field = "psychic_effect"+selected_characteristic_name;

      getAttrs([wr_field,difficulty_field,name_field,effect_field], function(values) {
        let psychic_wr = values[wr_field];
        psychic_difficulty = values[difficulty_field];
        let psychic_name = values[name_field];
        let psychic_effect = values[effect_field];

        setAttrs({
          "psychic_wr": psychic_wr,
          "psychic_name": psychic_name,
          "psychic_difficulty": psychic_difficulty,
          "psychic_effect": psychic_effect
        });
      });

      roll_string = "&{template:im1ed} [[?{Advantage | None,+0 | Advantage,+1 | Advantage (+10),+2 | Advantage (+20),+3 | Disadvantage,-1  | Disadvantage (-10),-2 | Disadvantage (-20),-3}]][[[[floor((@{skill_psychic_mastery} +[[ ?{Superiority | None,+0 | +1,+10 | +2,+20 | +3,+30 | +4,+40 | +5,+50 | +6,+60 | +7,+70 | +8,+80 | +9,+90 | +10,+100} + [[?{Modifier | None,+0 | +30,+30 | +20,+20 | +10,+10 | -30,-30 | -20,-20 | -10,-10 } + @{"+difficulty_field+"} ]] ]])))]]]][[1d100]][[d1]][[d1]][[d1]][[d1]][[d1]] {{wr=@{psychic_wr} }}{{name=@{psychic_name} }}{{difficulty=@{psychic_difficulty} }}{{effect=@{psychic_effect} }}{{roll= $[[2]] }}{{degrees1=$[[3]]}}{{skill=[[@{skill_psychic_mastery}]]}}{{modifier=$[[1]]}}{{advantage=$[[0]]}}{{reversedroll=$[[8]]}}{{target=$[[9]]}}{{degrees2=$[[10]]}}";
    }

    startRoll(roll_string, (results) => {
      let skill = results.results.skill.result;
      let modifier = parseInt(results.results.modifier.result);
      let advantage = results.results.advantage.result;
      let roll = results.results.roll.result;
      let reverseNumFn = num => parseInt(num.toString().split('').reverse().join('')) * Math.sign(num);
      let reversedNum = reverseNumFn(roll);
      let damage = results.results.damage?.result|0;
      let difficulty = 0;
      let effect = '';
      let wr = 0;

      let unitDigitFn = num => num % 10;
      let unitDigit = unitDigitFn(roll);
      let reversedUnitDigit = unitDigitFn(reversedNum);

      if (advantage > 0) {
        modifier += (advantage-1)*10;
        if (debug) console.log('+Advantage modifier '+modifier);
      } else if (advantage < 0) {
        modifier -= (advantage+1)*10;
        if (debug) console.log('-Advantage modifier '+modifier);
      }

      let target = parseInt(skill)+modifier;
      let degrees1 = Math.floor(target/10)-Math.floor(roll/10);
      let degrees2 = Math.floor(target/10)-Math.floor(reversedNum/10);

      let finalDamageFn = (advantage, damage, degrees1, degrees2) => {
        let degrees = degrees1;
        if (advantage > 0) {
          degrees = Math.max(degrees1, degrees2);
        } else if (advantage < 0) {
          degrees = Math.min(degrees1, degrees2);
        }
        if (debug) console.log("DEGREES USED: "+degrees);
        return (parseInt(damage)+degrees);
      }

      let final_damage = finalDamageFn(advantage, damage, degrees1, degrees2);

      finishRoll(
          results.rollId,
          {
            modifier: modifier,
            reversedroll: reversedNum,
            degrees1: degrees1,
            degrees2: degrees2,
            target: target,
            advantage: advantage,
            unitdigit: unitDigit,
            reversedunitdigit: reversedUnitDigit,
            damage: final_damage,
            name: name,
            effect: effect,
            difficulty: difficulty,
            wr: wr
          }
      );

      if (debug) {
        console.log('TARGET: '+target);
        console.log('DAMAGE: '+damage);
        console.log('SELECTED CHARACTERISTIC: '+selected_characteristic);
        console.log('SELECTED CHARACTERISTIC_NAME: '+selected_characteristic_name);
        console.log('SELECTED ROLLTYPE: '+selected_rolltype);
        console.log('DEGREES1: '+degrees1);
        console.log('DEGREES2: '+degrees2);
        console.log('The last digit of ', roll, ' is ', unitDigit);
        console.log('REVERSED NUM '+reversedNum);
        console.log('The last digit of ', reversedNum, ' is ', reversedUnitDigit);
        console.log('RESULTS ');
        console.log(results.results);
      }
    });
});
</script>